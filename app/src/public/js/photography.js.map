{"version":3,"sources":["lazyload.js","js/global.js","js/photography.js","../../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["global","factory","exports","_typeof","module","define","amd","LazyLoad","this","runningOnBrowser","window","isBot","test","defaultSettings","elements_selector","threshold","thresholds","document","createElement","data_srcset","data_sizes","data_bg","class_loading","class_loaded","class_error","load_delay","auto_unobserve","callback_enter","callback_exit","callback_reveal","callback_loaded","callback_error","callback_finish","use_native","getInstanceSettings","getData","element","attribute","value","getAttribute","setData","attrName","setAttribute","processedDataName","removeAttribute","getWasProcessedData","setTimeoutData","getTimeoutData","timeoutDataName","createInstance","elementToPurge","options","event","instance","classObj","createEvent","initCustomEvent","dispatchEvent","callbackIfSet","autoInitialize","callback","argument","updateLoadingCount","plusMinus","_elements","length","_loadingCount","_settings","getSourceTags","parentTag","childTag","sourceTags","i","children","setAttributeIfValue","tagName","settings","data_src","backgroundImage","IMG","parent","parentNode","forEach","sourceTag","setImageAttributes","IFRAME","VIDEO","load","setSources","elements","setSourcesFunctions","setSourcesFunction","setSourcesVideo","filter","srcDataValue","bgDataValue","setSourcesBgImage","addClass","className","addEventListener","eventName","handler","removeEventListener","genericLoadEventName","errorHandler","removeClass","loadHandler","addEventListeners","errorEventName","success","removeEventListeners","target","supportsClassList","remove","replace","RegExp","eventHandler","addOneShotEventListeners","revealAndUnobserve","observer","unobserve","cancelDelayLoad","timeoutId","clearTimeout","loadDelay","revealElement","force","managedTags","indexOf","setTimeout","callback_set","setObserver","_observer","IntersectionObserver","entries","entry","setWasProcessedData","delayLoad","onEnter","root","container","rootMargin","isIntersecting","nativeLazyTags","getElements","purgeProcessedElements","getObserverSettings","querySelectorAll","queryElements","shouldUseNative","customSettings","trueString","loadAllNative","prototype","update","_this","nodeSetToArray","loadAll","destroy","_this2","_this3","optionsItem","lazyLoadOptions","lazyLoad","body","timeout","menuOpen","bigBang","eventsAdded","canvas","querySelector","context","getContext","stars","offset","colours","getRandomInt","min","max","Math","floor","random","getRandomFloat","drawStar","x","y","radius","hue","sat","beginPath","arc","fillStyle","fill","generateStars","width","innerWidth","height","innerHeight","clearRect","overflowX","overflowY","density","moveStars","beta","gamma","offsetX","offsetY","star","addEvents","removeEvents","preventDefault","classList","add","data","thumbnails","currentAlbum","currentIndex","sidebar","sidebarWrapper","viewer","header","subheader","albums","resizeThumbnails","style","reduce","accumulator","offsetWidth","parseInt","getComputedStyle","marginLeft","marginRight","updateURL","url","location","href","URLSearchParams","search","get","history","replaceState","title","changePhoto","photos","imageURL","innerText","Array","from","current","scrollTop","offsetTop","offsetHeight","scrollLeft","offsetLeft","changeAlbum","innerHTML","thumbnailURL","index","image","appendChild","push","setup","response","param","Object","keys","key","option","insertBefore","includes","keyCode","fetch","then","repsonse","json","OVERLAY_ID","OldModule","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","getElementById","stackTrace","getParents","modules","parents","k","d","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"photography.js","sourceRoot":"../assets","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.LazyLoad = factory());\n}(this, (function () { 'use strict';\n\nconst runningOnBrowser = typeof window !== \"undefined\";\r\n\r\nconst isBot =\r\n\t(runningOnBrowser && !(\"onscroll\" in window)) ||\r\n\t(typeof navigator !== \"undefined\" &&\r\n\t\t/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\r\n\r\nconst supportsIntersectionObserver =\r\n\trunningOnBrowser && \"IntersectionObserver\" in window;\r\n\r\nconst supportsClassList =\r\n\trunningOnBrowser && \"classList\" in document.createElement(\"p\");\n\nconst defaultSettings = {\r\n\telements_selector: \"img\",\r\n\tcontainer: isBot || runningOnBrowser ? document : null,\r\n\tthreshold: 300,\r\n\tthresholds: null,\r\n\tdata_src: \"src\",\r\n\tdata_srcset: \"srcset\",\r\n\tdata_sizes: \"sizes\",\r\n\tdata_bg: \"bg\",\r\n\tclass_loading: \"loading\",\r\n\tclass_loaded: \"loaded\",\r\n\tclass_error: \"error\",\r\n\tload_delay: 0,\r\n\tauto_unobserve: true,\r\n\tcallback_enter: null,\r\n\tcallback_exit: null,\r\n\tcallback_reveal: null,\r\n\tcallback_loaded: null,\r\n\tcallback_error: null,\r\n\tcallback_finish: null,\r\n\tuse_native: false\r\n};\r\n\r\nvar getInstanceSettings = customSettings => {\r\n\treturn Object.assign({}, defaultSettings, customSettings);\r\n};\n\nconst dataPrefix = \"data-\";\r\nconst processedDataName = \"was-processed\";\r\nconst timeoutDataName = \"ll-timeout\";\r\nconst trueString = \"true\";\r\n\r\nconst getData = (element, attribute) => {\r\n\treturn element.getAttribute(dataPrefix + attribute);\r\n};\r\n\r\nconst setData = (element, attribute, value) => {\r\n\tvar attrName = dataPrefix + attribute;\r\n\tif (value === null) {\r\n\t\telement.removeAttribute(attrName);\r\n\t\treturn;\r\n\t}\r\n\telement.setAttribute(attrName, value);\r\n};\r\n\r\nconst setWasProcessedData = element =>\r\n\tsetData(element, processedDataName, trueString);\r\n\r\nconst getWasProcessedData = element =>\r\n\tgetData(element, processedDataName) === trueString;\r\n\r\nconst setTimeoutData = (element, value) =>\r\n\tsetData(element, timeoutDataName, value);\r\n\r\nconst getTimeoutData = element => getData(element, timeoutDataName);\n\nconst purgeProcessedElements = elements => {\r\n\treturn elements.filter(element => !getWasProcessedData(element));\r\n};\r\n\r\nconst purgeOneElement = (elements, elementToPurge) => {\r\n\treturn elements.filter(element => element !== elementToPurge);\r\n};\n\n/* Creates instance and notifies it through the window element */\r\nconst createInstance = function(classObj, options) {\r\n\tvar event;\r\n\tlet eventString = \"LazyLoad::Initialized\";\r\n\tlet instance = new classObj(options);\r\n\ttry {\r\n\t\t// Works in modern browsers\r\n\t\tevent = new CustomEvent(eventString, { detail: { instance } });\r\n\t} catch (err) {\r\n\t\t// Works in Internet Explorer (all versions)\r\n\t\tevent = document.createEvent(\"CustomEvent\");\r\n\t\tevent.initCustomEvent(eventString, false, false, { instance });\r\n\t}\r\n\twindow.dispatchEvent(event);\r\n};\r\n\r\n/* Auto initialization of one or more instances of lazyload, depending on the \r\n    options passed in (plain object or an array) */\r\nfunction autoInitialize(classObj, options) {\r\n\tif (!options) {\r\n\t\treturn;\r\n\t}\r\n\tif (!options.length) {\r\n\t\t// Plain object\r\n\t\tcreateInstance(classObj, options);\r\n\t} else {\r\n\t\t// Array of objects\r\n\t\tfor (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\r\n\t\t\tcreateInstance(classObj, optionsItem);\r\n\t\t}\r\n\t}\r\n}\n\nconst callbackIfSet = (callback, argument) => {\r\n\tif (callback) {\r\n\t\tcallback(argument);\r\n\t}\r\n};\n\nconst updateLoadingCount = (instance, plusMinus) => {\r\n\tinstance._loadingCount += plusMinus;\r\n\tif (instance._elements.length === 0 && instance._loadingCount === 0) {\r\n\t\tcallbackIfSet(instance._settings.callback_finish);\r\n\t}\r\n};\n\nconst getSourceTags = parentTag => {\r\n\tlet sourceTags = [];\r\n\tfor (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\r\n\t\tif (childTag.tagName === \"SOURCE\") {\r\n\t\t\tsourceTags.push(childTag);\r\n\t\t}\r\n\t}\r\n\treturn sourceTags;\r\n};\r\n\r\nconst setAttributeIfValue = (element, attrName, value) => {\r\n\tif (!value) {\r\n\t\treturn;\r\n\t}\r\n\telement.setAttribute(attrName, value);\r\n};\r\n\r\nconst setImageAttributes = (element, settings) => {\r\n\tsetAttributeIfValue(\r\n\t\telement,\r\n\t\t\"sizes\",\r\n\t\tgetData(element, settings.data_sizes)\r\n\t);\r\n\tsetAttributeIfValue(\r\n\t\telement,\r\n\t\t\"srcset\",\r\n\t\tgetData(element, settings.data_srcset)\r\n\t);\r\n\tsetAttributeIfValue(element, \"src\", getData(element, settings.data_src));\r\n};\r\n\r\nconst setSourcesImg = (element, settings) => {\r\n\tconst parent = element.parentNode;\r\n\r\n\tif (parent && parent.tagName === \"PICTURE\") {\r\n\t\tlet sourceTags = getSourceTags(parent);\r\n\t\tsourceTags.forEach(sourceTag => {\r\n\t\t\tsetImageAttributes(sourceTag, settings);\r\n\t\t});\r\n\t}\r\n\r\n\tsetImageAttributes(element, settings);\r\n};\r\n\r\nconst setSourcesIframe = (element, settings) => {\r\n\tsetAttributeIfValue(element, \"src\", getData(element, settings.data_src));\r\n};\r\n\r\nconst setSourcesVideo = (element, settings) => {\r\n\tlet sourceTags = getSourceTags(element);\r\n\tsourceTags.forEach(sourceTag => {\r\n\t\tsetAttributeIfValue(\r\n\t\t\tsourceTag,\r\n\t\t\t\"src\",\r\n\t\t\tgetData(sourceTag, settings.data_src)\r\n\t\t);\r\n\t});\r\n\tsetAttributeIfValue(element, \"src\", getData(element, settings.data_src));\r\n\telement.load();\r\n};\r\n\r\nconst setSourcesBgImage = (element, settings) => {\r\n\tconst srcDataValue = getData(element, settings.data_src);\r\n\tconst bgDataValue = getData(element, settings.data_bg);\r\n\r\n\tif (srcDataValue) {\r\n\t\telement.style.backgroundImage = `url(\"${srcDataValue}\")`;\r\n\t}\r\n\r\n\tif (bgDataValue) {\r\n\t\telement.style.backgroundImage = bgDataValue;\r\n\t}\r\n};\r\n\r\nconst setSourcesFunctions = {\r\n\tIMG: setSourcesImg,\r\n\tIFRAME: setSourcesIframe,\r\n\tVIDEO: setSourcesVideo\r\n};\r\n\r\nconst setSources = (element, instance) => {\r\n\tconst settings = instance._settings;\r\n\tconst tagName = element.tagName;\r\n\tconst setSourcesFunction = setSourcesFunctions[tagName];\r\n\tif (setSourcesFunction) {\r\n\t\tsetSourcesFunction(element, settings);\r\n\t\tupdateLoadingCount(instance, 1);\r\n\t\tinstance._elements = purgeOneElement(instance._elements, element);\r\n\t\treturn;\r\n\t}\r\n\tsetSourcesBgImage(element, settings);\r\n};\n\nconst addClass = (element, className) => {\r\n\tif (supportsClassList) {\r\n\t\telement.classList.add(className);\r\n\t\treturn;\r\n\t}\r\n\telement.className += (element.className ? \" \" : \"\") + className;\r\n};\r\n\r\nconst removeClass = (element, className) => {\r\n\tif (supportsClassList) {\r\n\t\telement.classList.remove(className);\r\n\t\treturn;\r\n\t}\r\n\telement.className = element.className.\r\n\t\treplace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").\r\n\t\treplace(/^\\s+/, \"\").\r\n\t\treplace(/\\s+$/, \"\");\r\n};\n\nconst genericLoadEventName = \"load\";\r\nconst mediaLoadEventName = \"loadeddata\";\r\nconst errorEventName = \"error\";\r\n\r\nconst addEventListener = (element, eventName, handler) => {\r\n\telement.addEventListener(eventName, handler);\r\n};\r\n\r\nconst removeEventListener = (element, eventName, handler) => {\r\n\telement.removeEventListener(eventName, handler);\r\n};\r\n\r\nconst addEventListeners = (element, loadHandler, errorHandler) => {\r\n\taddEventListener(element, genericLoadEventName, loadHandler);\r\n\taddEventListener(element, mediaLoadEventName, loadHandler);\r\n\taddEventListener(element, errorEventName, errorHandler);\r\n};\r\n\r\nconst removeEventListeners = (element, loadHandler, errorHandler) => {\r\n\tremoveEventListener(element, genericLoadEventName, loadHandler);\r\n\tremoveEventListener(element, mediaLoadEventName, loadHandler);\r\n\tremoveEventListener(element, errorEventName, errorHandler);\r\n};\r\n\r\nconst eventHandler = function(event, success, instance) {\r\n\tvar settings = instance._settings;\r\n\tconst className = success ? settings.class_loaded : settings.class_error;\r\n\tconst callback = success\r\n\t\t? settings.callback_loaded\r\n\t\t: settings.callback_error;\r\n\tconst element = event.target;\r\n\r\n\tremoveClass(element, settings.class_loading);\r\n\taddClass(element, className);\r\n\tcallbackIfSet(callback, element);\r\n\r\n\tupdateLoadingCount(instance, -1);\r\n};\r\n\r\nconst addOneShotEventListeners = (element, instance) => {\r\n\tconst loadHandler = event => {\r\n\t\teventHandler(event, true, instance);\r\n\t\tremoveEventListeners(element, loadHandler, errorHandler);\r\n\t};\r\n\tconst errorHandler = event => {\r\n\t\teventHandler(event, false, instance);\r\n\t\tremoveEventListeners(element, loadHandler, errorHandler);\r\n\t};\r\n\taddEventListeners(element, loadHandler, errorHandler);\r\n};\n\nconst managedTags = [\"IMG\", \"IFRAME\", \"VIDEO\"];\r\n\r\nconst onEnter = (element, instance) => {\r\n\tconst settings = instance._settings;\r\n\tcallbackIfSet(settings.callback_enter, element);\r\n\tif (!settings.load_delay) {\r\n\t\trevealAndUnobserve(element, instance);\r\n\t\treturn;\r\n\t}\r\n\tdelayLoad(element, instance);\r\n};\r\n\r\nconst revealAndUnobserve = (element, instance) => {\r\n\tvar observer = instance._observer;\r\n\trevealElement(element, instance);\r\n\tif (observer && instance._settings.auto_unobserve) {\r\n\t\tobserver.unobserve(element);\r\n\t}\r\n};\r\n\r\nconst onExit = (element, instance) => {\r\n\tconst settings = instance._settings;\r\n\tcallbackIfSet(settings.callback_exit, element);\r\n\tif (!settings.load_delay) {\r\n\t\treturn;\r\n\t}\r\n\tcancelDelayLoad(element);\r\n};\r\n\r\nconst cancelDelayLoad = element => {\r\n\tvar timeoutId = getTimeoutData(element);\r\n\tif (!timeoutId) {\r\n\t\treturn; // do nothing if timeout doesn't exist\r\n\t}\r\n\tclearTimeout(timeoutId);\r\n\tsetTimeoutData(element, null);\r\n};\r\n\r\nconst delayLoad = (element, instance) => {\r\n\tvar loadDelay = instance._settings.load_delay;\r\n\tvar timeoutId = getTimeoutData(element);\r\n\tif (timeoutId) {\r\n\t\treturn; // do nothing if timeout already set\r\n\t}\r\n\ttimeoutId = setTimeout(function() {\r\n\t\trevealAndUnobserve(element, instance);\r\n\t\tcancelDelayLoad(element);\r\n\t}, loadDelay);\r\n\tsetTimeoutData(element, timeoutId);\r\n};\r\n\r\nconst revealElement = (element, instance, force) => {\r\n\tvar settings = instance._settings;\r\n\tif (!force && getWasProcessedData(element)) {\r\n\t\treturn; // element has already been processed and force wasn't true\r\n\t}\r\n\tif (managedTags.indexOf(element.tagName) > -1) {\r\n\t\taddOneShotEventListeners(element, instance);\r\n\t\taddClass(element, settings.class_loading);\r\n\t}\r\n\tsetSources(element, instance);\r\n\tsetWasProcessedData(element);\r\n\tcallbackIfSet(settings.callback_reveal, element);\r\n\tcallbackIfSet(settings.callback_set, element);\r\n};\n\nconst isIntersecting = entry =>\r\n\tentry.isIntersecting || entry.intersectionRatio > 0;\r\n\r\nconst getObserverSettings = settings => ({\r\n\troot: settings.container === document ? null : settings.container,\r\n\trootMargin: settings.thresholds || settings.threshold + \"px\"\r\n});\r\n\r\nconst setObserver = instance => {\r\n\tif (!supportsIntersectionObserver) {\r\n\t\treturn false;\r\n\t}\r\n\tinstance._observer = new IntersectionObserver(entries => {\r\n\t\tentries.forEach(entry =>\r\n\t\t\tisIntersecting(entry)\r\n\t\t\t\t? onEnter(entry.target, instance)\r\n\t\t\t\t: onExit(entry.target, instance)\r\n\t\t);\r\n\t}, getObserverSettings(instance._settings));\r\n\treturn true;\r\n};\n\nconst nativeLazyTags = [\"IMG\", \"IFRAME\"];\r\n\r\nconst shouldUseNative = settings =>\r\n\tsettings.use_native && \"loading\" in HTMLImageElement.prototype;\r\n\r\nconst loadAllNative = instance => {\r\n\tinstance._elements.forEach(element => {\r\n\t\tif (nativeLazyTags.indexOf(element.tagName) === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telement.setAttribute(\"loading\", \"lazy\");\r\n\t\trevealElement(element, instance);\r\n\t});\r\n};\n\nconst nodeSetToArray = nodeSet => Array.prototype.slice.call(nodeSet);\r\n\r\nconst queryElements = settings =>\r\n\tsettings.container.querySelectorAll(settings.elements_selector);\r\n\r\nconst getElements = (elements, settings) =>\r\n\tpurgeProcessedElements(nodeSetToArray(elements || queryElements(settings)));\r\n\r\nconst LazyLoad = function(customSettings, elements) {\r\n\tthis._settings = getInstanceSettings(customSettings);\r\n\tthis._loadingCount = 0;\r\n\tsetObserver(this); // Still useful for elements other than IMG and IFRAME\r\n\tthis.update(elements);\r\n};\r\n\r\nLazyLoad.prototype = {\r\n\tupdate: function(elements) {\r\n\t\tvar settings = this._settings;\r\n\t\tthis._elements = getElements(elements, settings);\r\n\t\tif (isBot || !this._observer) {\r\n\t\t\tthis.loadAll();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (shouldUseNative(settings)) {\r\n\t\t\tloadAllNative(this);\r\n\t\t\tthis._elements = getElements(elements, settings);\r\n\t\t}\r\n\t\tthis._elements.forEach(element => {\r\n\t\t\tthis._observer.observe(element);\r\n\t\t});\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tif (this._observer) {\r\n\t\t\tthis._elements.forEach(element => {\r\n\t\t\t\tthis._observer.unobserve(element);\r\n\t\t\t});\r\n\t\t\tthis._observer = null;\r\n\t\t}\r\n\t\tthis._elements = null;\r\n\t\tthis._settings = null;\r\n\t},\r\n\r\n\tload: function(element, force) {\r\n\t\trevealElement(element, this, force);\r\n\t},\r\n\r\n\tloadAll: function() {\r\n\t\tthis._elements.forEach(element => {\r\n\t\t\trevealAndUnobserve(element, this);\r\n\t\t});\r\n\t}\r\n};\r\n\r\n/* Automatic instances creation if required (useful for async script loading) */\r\nif (runningOnBrowser) {\r\n\tautoInitialize(LazyLoad, window.lazyLoadOptions);\r\n}\n\nreturn LazyLoad;\n\n})));\n","// eslint-disable-next-line import/no-extraneous-dependencies\nimport LazyLoad from 'vanilla-lazyload';\n\nconst lazyLoad = new LazyLoad();\n\nconst { body } = document;\nlet timeout; // Timeout for menu transition\nlet menuOpen = false; // Boolean for when the menu is open/closed\nlet bigBang = false; // Initialisation boolean if the canvas has been populated and rendered\nlet eventsAdded = false; // Boolean to attach/detach the 'deviceorientation' event listener\n\nconst canvas = document.querySelector('.js-stars');\nconst context = canvas.getContext('2d');\n\nlet stars = [];\nconst offset = 0.2;\nconst colours = [0, 60, 240];\n\nconst getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\nconst getRandomFloat = (min, max) => Math.random() * (max - min) + min;\n\nconst drawStar = ({ x, y, radius, hue, sat }) => {\n  context.beginPath();\n  context.arc(x, y, radius, 0, 360);\n  context.fillStyle = `hsl(${hue}, ${sat}%, 88%)`;\n  context.fill();\n};\n\nconst generateStars = () => {\n  stars = [];\n\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n  const { width, height } = canvas;\n\n  context.clearRect(0, 0, width, height);\n\n  const overflowX = width * offset;\n  const overflowY = height * offset;\n\n  const density = (width + overflowX) + (height + overflowY);\n\n  for (let i = 0; i <= density; i += 1) {\n    const x = getRandomInt(-overflowX, width + overflowX);\n    const y = getRandomInt(-overflowY, height + overflowY);\n\n    const radius = getRandomFloat(0.2, 1.5);\n    const hue = colours[getRandomInt(0, colours.length - 1)];\n    const sat = getRandomInt(50, 100);\n\n    stars[i] = { x, y, radius, hue, sat };\n    drawStar(stars[i]);\n  }\n};\n\nconst moveStars = ({ beta, gamma }) => {\n  context.clearRect(0, 0, canvas.width, canvas.height);\n\n  const offsetX = (beta * 15) - (canvas.width / 2);\n  const offsetY = (gamma * 15) - (canvas.height / 2);\n\n  stars.forEach(star => drawStar({\n    ...star,\n    x: star.x + (offsetX * 0.25) * (star.radius * 0.5),\n    y: star.y + (offsetY * 0.25) * (star.radius * 0.5),\n  }));\n};\n\nconst addEvents = () => {\n  if (!eventsAdded) {\n    window.addEventListener('deviceorientation', moveStars);\n    window.addEventListener('resize', generateStars);\n    eventsAdded = true;\n  }\n};\n\nconst removeEvents = () => {\n  if (eventsAdded) {\n    window.removeEventListener('deviceorientation', moveStars);\n    window.removeEventListener('resize', generateStars);\n    eventsAdded = false;\n  }\n};\n\nbody.querySelector('.js-menu').addEventListener('click', (event) => {\n  event.preventDefault();\n\n  clearTimeout(timeout);\n\n  if (!bigBang) {\n    bigBang = true;\n    generateStars();\n  }\n\n  addEvents();\n\n  body.classList.add('menu', 'position');\n  menuOpen = true;\n});\n\nbody.querySelector('.js-overlay').addEventListener('click', (event) => {\n  event.preventDefault();\n\n  // Todo: replace with CSS transition event listener\n  timeout = setTimeout(() => {\n    menuOpen = false;\n    removeEvents();\n    body.classList.remove('position');\n  }, 200);\n\n  body.classList.remove('menu');\n});\n\nwindow.addEventListener('resize', () => {\n  if (window.innerWidth <= 800 && menuOpen) {\n    generateStars();\n    addEvents();\n  } else {\n    removeEvents();\n  }\n});\n\nexport default lazyLoad;\n","import lazyLoad from './global';\n\nlet data;\nlet thumbnails = [];\nlet currentAlbum;\nlet currentIndex;\n\nconst elements = {\n  sidebar: document.querySelector('.js-sidebar'),\n  sidebarWrapper: document.querySelector('.js-sidebar-wrapper'),\n  viewer: document.querySelector('.js-viewer'),\n  header: document.querySelector('.js-header'),\n  subheader: document.querySelector('.js-subheader'),\n  albums: document.querySelector('.js-albums'),\n};\n\nconst resizeThumbnails = () => {\n  const { sidebarWrapper } = elements;\n\n  if (window.innerWidth > 800) {\n    sidebarWrapper.style.width = null;\n  } else {\n    const width = thumbnails.reduce((accumulator, element) => {\n      let value = element.offsetWidth;\n      value += parseInt(getComputedStyle(element).marginLeft, 10);\n      value += parseInt(getComputedStyle(element).marginRight, 10);\n      return accumulator + value;\n    }, 0);\n\n    sidebarWrapper.style.width = `${width}px`;\n  }\n};\n\nconst updateURL = (target) => {\n  let url = `${window.location.href}?album=${target}`;\n  if (new URLSearchParams(window.location.search).get('album')) {\n    url = window.location.href.replace(/(album=)[^&]+/, `album=${target}`);\n  }\n  window.history.replaceState(null, window.document.title, url);\n};\n\nconst changePhoto = (target = 0) => {\n  const { viewer, sidebar, header, subheader } = elements;\n  const { photos } = currentAlbum;\n\n  if (target === 'prev') {\n    currentIndex -= 1;\n    if (currentIndex < 0) {\n      currentIndex = photos.length - 1;\n    }\n  } else if (target === 'next') {\n    currentIndex += 1;\n    if (currentIndex > photos.length - 1) {\n      currentIndex = 0;\n    }\n  } else {\n    currentIndex = target;\n  }\n\n  const { title, imageURL } = photos[currentIndex];\n  header.innerText = title;\n  subheader.innerText = `Photo ${currentIndex + 1} of ${photos.length}`;\n  viewer.style.backgroundImage = `url(\"${imageURL}\")`;\n\n  Array.from(thumbnails).forEach(({ classList }) => classList.remove('current'));\n  const current = thumbnails[currentIndex];\n  current.classList.add('current');\n\n  sidebar.scrollTop = current.offsetTop - (sidebar.offsetHeight / 2) - (current.offsetHeight / 2);\n  sidebar.scrollLeft = current.offsetLeft - (sidebar.offsetWidth / 2) - (current.offsetWidth / 2);\n};\n\nconst changeAlbum = (target) => {\n  const { sidebarWrapper } = elements;\n\n  thumbnails = [];\n  sidebarWrapper.innerHTML = '';\n  currentAlbum = data[target];\n\n  currentAlbum.photos.forEach(({ title, thumbnailURL }, index) => {\n    const element = document.createElement('a');\n    element.setAttribute('href', '#');\n    element.classList.add('thumbnail');\n    element.addEventListener('click', (event) => {\n      event.preventDefault();\n      changePhoto(index);\n    });\n\n    const image = document.createElement('img');\n    image.setAttribute('alt', title);\n    image.setAttribute('data-src', thumbnailURL);\n    element.appendChild(image);\n\n    thumbnails.push(element);\n    sidebarWrapper.appendChild(element);\n  });\n\n  changePhoto();\n  resizeThumbnails();\n  updateURL(target);\n\n  lazyLoad.update();\n};\n\nconst setup = (response) => {\n  data = response;\n\n  const param = new URLSearchParams(window.location.search).get('album');\n  const { albums } = elements;\n\n  Object.keys(data).forEach((key) => {\n    const { title } = data[key];\n\n    const option = document.createElement('option');\n    option.value = key;\n    option.innerText = title;\n\n    if (param === key) {\n      option.setAttribute('selected', '');\n    }\n\n    if (key === 'portfolio') {\n      albums.insertBefore(option, albums.querySelector('optgroup'));\n    } else {\n      albums.querySelector('optgroup').appendChild(option);\n    }\n  });\n\n  albums.addEventListener('change', () => changeAlbum(albums.value));\n\n  let target = 'portfolio';\n  if (Object.keys(data).includes(param)) {\n    target = param;\n  }\n\n  changeAlbum(target);\n};\n\nArray.from(document.querySelectorAll('.js-arrow')).forEach(element => element.addEventListener('click', (event) => {\n  event.preventDefault();\n  changePhoto(element.getAttribute('data-target'));\n}));\n\nwindow.addEventListener('keydown', ({ keyCode }) => {\n  if (keyCode === 37 || keyCode === 38 || keyCode === 80 || keyCode === 65) {\n    changePhoto('prev');\n  } else if (keyCode === 39 || keyCode === 40 || keyCode === 78 || keyCode === 68) {\n    changePhoto('next');\n  }\n});\n\nwindow.addEventListener('resize', resizeThumbnails);\n\nfetch('/api/photos')\n  .then(repsonse => repsonse.json())\n  .then(setup);\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}